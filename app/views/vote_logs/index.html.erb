<%# 현재 투표율 %>
<div class="votenum_box d-flex justify-content-center">
  <div class="votenum_text">
    투표와 함께하는 즐거움<br>
    실시간 로또 참여인수
    <%# 투표 인원수 %>
    <div class="d-flex justify-content-center">
      <p id="counter1"></p>
      <i class="fas fa-sync-alt"></i>
    </div>
    <%= button_to "응모하기", new_vote_log_path, :class => "btn btn-outline-secondary btn_vote", :method => :get %>
  </div>
  
</div>
<div class="container">
<%# --------------참여방법 소개---------------- %>

<%# -------참여방법소개 끝----------- %>
  <p id="notice"><%= notice %></p>

  <%#= link_to '응모하기', new_vote_log_path %>
  
  <div class="images">
    <div class="row justify-content-between">
      <% @vote_logs.each do |vote_log| %>
      <%= image_tag vote_log.image , class: "vote_img"%>
    <% end %>
    </div>
  </div>

  <%= paginate @vote_logs %>

</div>

<script>
  function numberCounter(target_frame, target_number) {
    this.count = 0; this.diff = 0;
    this.target_count = parseInt(target_number);
    this.target_frame = document.getElementById(target_frame);
    this.timer = null;
    this.counter();
  };
  numberCounter.prototype.counter = function() {
      var self = this;
      this.diff = this.target_count - this.count;
  
      if(this.diff > 0) {
          self.count += Math.ceil(this.diff / 5);
      }
  
      this.target_frame.innerHTML = this.count.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
  
      if(this.count < this.target_count) {
          this.timer = setTimeout(function() { self.counter(); }, 800);
      } else {
          clearTimeout(this.timer);
      }
  };
var votenum = '<%=@num%>';

new numberCounter("counter1", votenum);

$("#loading").on("click", function() {

     $("#result").load("/vote_logs");
    });
</script>
<%#= link_to 'New Vote Log', new_vote_log_path %>

